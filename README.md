![Снимок экрана от 2021-05-13 07-37-46](https://user-images.githubusercontent.com/71945221/118078279-831ff580-b3be-11eb-84d6-546962d7ab6a.png)
![Снимок экрана от 2021-05-13 07-38-09](https://user-images.githubusercontent.com/71945221/118078281-84512280-b3be-11eb-9791-2e3ee1fb4ebd.png)
![Снимок экрана от 2021-05-13 07-38-13](https://user-images.githubusercontent.com/71945221/118078282-84e9b900-b3be-11eb-8f65-45331ae0698e.png)
![Снимок экрана от 2021-05-13 07-38-51](https://user-images.githubusercontent.com/71945221/118078283-84e9b900-b3be-11eb-85ab-a87bfedaff46.png)
![Снимок экрана от 2021-05-13 07-38-54](https://user-images.githubusercontent.com/71945221/118078285-85824f80-b3be-11eb-8087-50534208a697.png)
![Снимок экрана от 2021-05-13 07-39-07](https://user-images.githubusercontent.com/71945221/118078286-85824f80-b3be-11eb-830c-fdadbb224430.png)
![Снимок экрана от 2021-05-13 07-39-10](https://user-images.githubusercontent.com/71945221/118078289-861ae600-b3be-11eb-944c-b99d458cb195.png)
# Arduino-WebSCADA
my_home_project

В текущий момент работа ведется на ветке Branch-1

Проект делается для себя.

Проект состоит из двух частей:

1.Приложение с графическим интерфейсом на писанным на tkinter, которое в асинхронном бесконечном цикле опрашивает Arduino, получает данные и пишет их в базу данных.

3.Веб сервер на flask. Который представляет из себя Web-SCADA'у.
Из википедии:
"SCADA (аббр. от англ. Supervisory Control And Data Acquisition — диспетчерское управление и сбор данных) — программный пакет, предназначенный для разработки или обеспечения работы в реальном времени систем сбора, обработки, отображения и архивирования информации об объекте мониторинга или управления."

На данный момент структура проекта следующая:


Arduino:

1.arduino_control.py:
Главный скрипт запрашивающий в бесконечном асинхронном цикле раз в 3 секунды у Arduino данные, принимающий их и пишущий в базу данных SQLite.

2.arduino_func.py:
Здесь находятся вспомогательные функции для работы с Arduino, допустим поиск доступных портов, определение порта на котором подключен Arduino и тп.

3.tk_gui.py:
Здесь создается графический интерфейс для запуска приложения написанный на tkinter.

4.arduino_app.py:
Запуск и управление arduino_func.py и tk_gui.py. А так же запуск и остановка веб-сервера, открытие веб-сервера в браузере. Просмотр логов.

5.button_func.py:
Сюда будут отправлены многочисленные функции tk_gui для уменьшения количества кода в tk_gui.


Web-server:

1.run_server.py:
Запуск сервера. Либо отсюда, либо так же осуществляется из графического приложения.

2.server.py:
Создается наш сервер и доступные url's.

3.views.py:
Представления обрабатывающие запросы по определенным url'лам.

4.models.py:
Модели для базы данных. Используется ORM библиотека peewee.

5.web_form.py:
Веб формы написанные на WTF-Flask.

6.server_func.py:
Дополнительные функции используемые в представлениях.


Дополнительно:

1.logging_config.py:
Настраивается логирование. Используется модуль loguru.

2.config.ini:
Хранятся некоторые конфиги.

3.config.py:
Происходит парсинг config.ini.


Папки:

1.templates:
Шаблоны страниц. Для стилизации страниц применяется фреймворк Bootstrap 5.

2.static:
Хранятся статические файлы: js-скрипты, css-стили, картинки.

3.log:
Хранятся логи проекта.

4.ArduinoSketch:
Скетчи для Arduino.


В процессе:
---интерактивный календарь для выбора даты и времени.

---Создание интерактивных графиков с нужными показаниями по запрошенному временному интервалу.

---Возможность добавлять и удалять нужные датчики для опроса через интерфейс приложения.

---Управление исполнительными механизмами подключенными к Arduino через веб страницу.

---Рефакторинг кода, отлов возможных ошибок/исключений и борьба сними.

---Стилизация страницы с помощью Bootstrap 5.

---Разбиение проекта на пакеты.




Сделано:

---Данные от Arduino получаются и пишутся в БД.

---Сделана главная страница веб сервера. Возможность выбора даты начала и конца нужного временного промежутка, а так же выбор нужных показаний. В результате чего строится таблица с нужными показаниями за нужный временной промежуток.

---Написано простое графическое приложение для запуска скрипта arduino_control.py, с возможностью выбора порта и скорости передачи данных, а так же отображением в окне последних сделанных записях.

---Добавлено автоопределение порта с подключенным Arduino.

---Реализованно логирование. Добавлены конфиги.

---В графическом приложении теперь логи открываются по необходимости в отдельном окне. Так же из графического приложения добавлена возможность управлять веб-сервером: старт, стоп, открытие страницы сервера в браузере. Сервер запускается в виде отдельного процесса.

---На главной странице добавлен выбор в каком виде хотим получить данные, таблица или тренд. 

---Добавлен прсотенький тренд на библиотеке liteChart, вернусь к нему когда подтянуту JS и какойнибудь фреймворк.
